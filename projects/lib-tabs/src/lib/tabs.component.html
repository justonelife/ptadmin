@let _mapper = mapper();

<mat-tab-group [preserveContent]="perserveContent()">
  @for (tab of tabs(); track tab.value) {
    <mat-tab>
      <ng-template mat-tab-label>
        <span
          libIconPosition="center left"
          [icon]="tab.icon || ''"
          iconSet="outlined"
        >
          {{ tab.label }}
        </span>
      </ng-template>

      <ng-template matTabContent>
        @if (_mapper[tab.value].component) {
          <ng-container
            *ngComponentOutlet="_mapper[tab.value].component | async"
          ></ng-container>
        } @else {
          <ng-container
            *ngTemplateOutlet="_mapper[tab.value].template"
          ></ng-container>
        }
      </ng-template>
    </mat-tab>
  }
</mat-tab-group>
